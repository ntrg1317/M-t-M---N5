\NeedsTeXFormat{LaTeX2e}
\RequirePackage{geometry}
\geometry{left=2.5cm, right=2cm, top=2.5cm, bottom=2.5cm, a4paper, twoside}
\RequirePackage{fix-cm}
\RequirePackage{tikz}
\RequirePackage{calc}
\usetikzlibrary{calc}
\RequirePackage{enumitem}
\RequirePackage{xcolor}
\definecolor{HustRed}{RGB}{206,22,40}
\definecolor{SamiBlue}{RGB}{27,79,147}
\RequirePackage[most]{tcolorbox}
\RequirePackage{fancyhdr}
\RequirePackage[outline]{contour}
\RequirePackage[explicit]{titlesec}
\renewcommand\thesection{\Roman{section}}
\titleformat{\section}
{\ttfamily\Huge\bfseries}
{
\ifodd\value{page}
\begin{tikzpicture}[overlay, remember picture]
\node[yshift=-0.05\paperheight, scale=4, rectangle, xshift=-0.5cm, left] at (current page.north east) {\itshape\color{\@usecolor!50}\thesection};
\end{tikzpicture}
\else
\begin{tikzpicture}[overlay, remember picture]
\node[yshift=-0.05\paperheight, scale=4, rectangle, xshift=0.25cm, right] at (current page.north west) {\itshape\color{\@usecolor!50}\thesection};
\end{tikzpicture}
\fi
}
{20pt}
{
\ifodd\value{page}
\begin{tikzpicture}[overlay, remember picture]
\fill [\@usecolor, fill opacity=0.2] (current page.north west) rectangle ++(\paperwidth,-0.1\paperheight);
\node[xshift=0.075\paperwidth, yshift=-0.1\paperheight, right, rectangle, rounded corners=10pt, fill=\@usecolor, inner sep=10pt, scale=1] at (current page.north west) {\color{white}#1};
\end{tikzpicture}
\else 
\begin{tikzpicture}[overlay, remember picture]
\fill [\@usecolor, fill opacity=0.2] (current page.north west) rectangle ++(\paperwidth,-0.1\paperheight);
\node[xshift=0.925\paperwidth, yshift=-0.1\paperheight, left, rectangle, rounded corners=10pt, fill=\@usecolor, inner sep=10pt, scale=1] at (current page.north west) {\color{white}#1};
\end{tikzpicture}
\fi
}[\vspace{30pt}]

% \titleformat{\section}[hang]
% {\bfseries}
% {%\filright
% \begin{tikzpicture}
% \node[
% inner xsep=5pt,
% left color=SamiBlue!80!, right color=SamiBlue!30!, minimum height=1.1cm, rounded corners = 10pt,
% font=\color{white},
% align=center
% ]{\Huge\contour{SamiBlue}{\thesection.}};
% \end{tikzpicture}
% }
% {0pt}
% {\begin{tikzpicture}
%  \node[inner xsep=5pt,text width=16.35cm,rounded corners = 5pt,
%     align=left, fill=white, minimum height=1.1cm, font=\color{white}]
%     {\parbox[t]{16.35cm}{\Large\raggedright\color{SamiBlue}{#1}}};
% \end{tikzpicture}}
% \titleformat{\subsection}
% {\large\bfseries}
% {\thesubsection.}{5pt}{#1}

\let\oldsection\section
\renewcommand\section{\cleardoublepage\oldsection}
\renewcommand\thesubsection{\arabic{subsection}}
\titleformat{\subsection}
{\Large\bfseries\color{SamiBlue}}
{\thesubsection}{2.5ex}{#1}
\newenvironment{block}[1]
{ \begin{tcolorbox}[%
    enhanced,
    attach boxed title to top left={yshift=-10pt, xshift=10pt},
      colback=white,
      colframe=\@usecolor,
      arc=3mm,
      title={\textbf{\sffamily#1}},
      colbacktitle=\@usecolor,
      coltitle=white,
      boxrule=2pt,
      before upper={\tcbtitle\vskip-5pt\par}
    ]
    \begin{minipage}{\textwidth}}
{\end{minipage}
\end{tcolorbox}}
\setlist{format={\color{\@usecolor}\bfseries}}

\def\@insertfirstlogo{}
\newcommand{\flogo}[2][]{
\gdef\@insertfirstlogo{\includegraphics[#1]{#2}}}
\def\@insertsecondlogo{}
\newcommand{\slogo}[2][]{
\gdef\@insertsecondlogo{\includegraphics[#1]{#2}}}
\def\info#1{\gdef\@info{#1}}
\def\@info{\@latex@error{No \noexpand\info given}\@ehc}
\def\usecolor#1{\gdef\@usecolor{#1}}
\def\subtitle#1{\gdef\@subtitle{#1}}
\def\@subtitle{\@latex@error{No \noexpand\subtitle given}\@ehc}
\def\@maketitle{
\newpage\null
\thispagestyle{empty}
\begin{tikzpicture}[overlay, remember picture, shift=(current page.north west), x={(current page.north east)}, y={(current page.south west)}, place/.style={circle,draw,fill=\@usecolor,thick,inner sep=0pt,minimum size=1.5mm}]

\node[opacity=1,inner sep=0pt] at (0.5,0.5){\includegraphics{cover1.png}}; 
% \fill[\@usecolor!5] (0,0) rectangle (0.75,0.2);
% \draw[thick, color=\@usecolor, line width=1mm, rounded corners =2mm] (0.03,0.015) rectangle (0.97,0.985);  % viền
% \fill[\@usecolor!25] (0,0) rectangle (0.6,0.25);
% \fill[\@usecolor!45] (0,0.1) rectangle (0.45,0.4);
% \fill[\@usecolor!65] (0,0.2) rectangle (0.3,0.55);
% \fill[\@usecolor!85] (0,0.3) rectangle (0.15,0.8);

\node [align=right, inner ysep=25pt, inner xsep=0pt, font=\fontsize{38}{14}\selectfont\sffamily\bfseries\color{\@usecolor}] at (0.572,0.35) {\@title};
\node[align=left, inner ysep=25pt, inner xsep=5pt, font=\sffamily\bfseries\color{\@usecolor}\fontsize{25}{12}\selectfont, right] at (0.352,0.45) {\@subtitle};
\node[right] at (0.395, 0.55) {\Large \@info};
\node[below right] at (0.415, 0.575) {\Large\begin{tabular}[t]{ll}
\@author
\end{tabular}};

% \node[above right] at (0.12,0.9) {\@insertfirstlogo};
\node[above right] at (0.55,0.15) {\@insertfirstlogo};
\node[above right] at (0.55,0.20) {\@insertsecondlogo};
\node[right] at (0.515, 0.875) {\large Hà Nội, \@date};
\end{tikzpicture}
}

\newcommand{\maketitlepage}{
\maketitle
\thispagestyle{empty}
\newpage
\setcounter{page}{2}
}
\usecolor{SamiBlue}

\pagestyle{empty}